<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¸¸è¦‹å•é¡Œ - SEO Analyzer API</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">
    
    <!-- è‡ªå®šç¾©æ¨£å¼æª”æ¡ˆ -->
    <link rel="stylesheet" type="text/css" href="/static/css/custom-swagger.css" />
    
    <!-- FAQ å°ˆç”¨æ¨£å¼ -->
    <style>
        /* ä½¿ç”¨èˆ‡å…¶ä»–é é¢ç›¸åŒçš„å“ç‰Œè‰²å½© */
        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --accent-color: #48bb78;
            --background-color: #f7fafc;
            --text-color: #2d3748;
            --text-secondary: #4a5568;
            --border-color: #e2e8f0;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --success-color: #38a169;
            --warning-color: #d69e2e;
            --error-color: #e53e3e;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: var(--background-color);
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        /* è‡ªå®šç¾©æ¨™é¡Œå€ */
        .custom-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 0;
            text-align: center;
            margin-bottom: 0;
        }

        .custom-header h1 {
            font-size: 2.5rem;
            margin: 0 0 10px 0;
            font-weight: 700;
        }

        .custom-header p {
            font-size: 1.1rem;
            margin: 0;
            opacity: 0.9;
        }

        /* ä¸»å®¹å™¨ */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* æœå°‹å’Œç¯©é¸å€åŸŸ */
        .search-filter-container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 4px 6px var(--shadow-color);
        }

        .search-box {
            position: relative;
            margin-bottom: 20px;
        }

        .search-input {
            width: 100%;
            padding: 15px 50px 15px 20px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
            background-color: #fff;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .search-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
        }

        /* åˆ†é¡ç¯©é¸å™¨ */
        .category-filters {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .filter-tag {
            padding: 8px 16px;
            border: 2px solid var(--border-color);
            border-radius: 20px;
            background: white;
            color: var(--text-color);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: 500;
        }

        .filter-tag:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .filter-tag.active {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-color: var(--primary-color);
        }

        /* FAQ é …ç›®å®¹å™¨ */
        .faq-container {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 4px 6px var(--shadow-color);
        }

        /* FAQ é …ç›® */
        .faq-item {
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 0;
        }

        .faq-item:last-child {
            border-bottom: none;
        }

        .faq-question {
            padding: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.3s ease;
            user-select: none;
        }

        .faq-question:hover {
            background-color: rgba(102, 126, 234, 0.05);
        }

        .faq-question h3 {
            margin: 0;
            font-size: 1.1rem;
            color: var(--text-color);
            font-weight: 600;
        }

        .faq-icon {
            width: 24px;
            height: 24px;
            transition: transform 0.3s ease;
            color: var(--primary-color);
        }

        .faq-item.active .faq-icon {
            transform: rotate(180deg);
        }

        .faq-answer {
            padding: 0 20px;
            max-height: 0;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .faq-item.active .faq-answer {
            padding: 0 20px 20px 20px;
            max-height: 1000px;
        }

        .faq-answer-content {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .faq-answer-content p {
            margin: 10px 0;
        }

        .faq-answer-content pre {
            background: #f8f9fa;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 15px;
            margin: 15px 0;
            overflow-x: auto;
            font-size: 14px;
        }

        .faq-answer-content code {
            background: #f1f3f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
            font-size: 0.9em;
        }

        /* åˆ†é¡æ¨™ç±¤ */
        .category-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 10px;
        }

        .category-api { background: #e6f3ff; color: #0066cc; }
        .category-errors { background: #ffe6e6; color: #cc0000; }
        .category-performance { background: #e6ffe6; color: #006600; }
        .category-integration { background: #fff3e6; color: #cc6600; }

        /* ç„¡çµæœç‹€æ…‹ */
        .no-results {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
        }

        .no-results-icon {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.3;
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 768px) {
            .custom-header h1 {
                font-size: 2rem;
            }

            .search-filter-container {
                margin: 20px 0;
                padding: 20px;
            }

            .category-filters {
                justify-content: center;
            }

            .faq-question h3 {
                font-size: 1rem;
                margin-right: 10px;
            }

            .category-badge {
                display: block;
                margin: 5px 0 0 0;
            }

            .nav-menu {
                margin-top: 20px;
                gap: 8px;
            }

            .nav-item {
                padding: 10px 16px;
                font-size: 0.9rem;
            }

            .nav-item .nav-icon {
                font-size: 1em;
            }

            .nav-item .nav-label {
                font-size: 0.85rem;
            }
        }

        /* è¼‰å…¥å‹•ç•« */
        .loading {
            display: none;
            text-align: center;
            padding: 40px;
            color: var(--text-secondary);
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--border-color);
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* å°èˆªé¸å–®æ¨£å¼ */
        .nav-menu {
            margin-top: 30px;
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .nav-item {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 12px 20px;
            border-radius: 25px;
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            color: white;
            text-decoration: none;
        }

        .nav-item.active {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.4);
        }

        .nav-item .nav-icon {
            font-size: 1.1em;
        }

        .nav-item .nav-label {
            font-size: 0.95rem;
        }
    </style>
</head>

<body>
    <!-- è‡ªå®šç¾©æ¨™é¡Œå€ -->
    <div class="custom-header">
        <div class="container">
            <h1>å¸¸è¦‹å•é¡Œ</h1>
            <p>SEO Analyzer API ä½¿ç”¨æŒ‡å—èˆ‡å•é¡Œè§£ç­”</p>
            
            <!-- æ–‡æª”å°èˆªé¸å–® -->
            <div class="nav-menu">
                <a href="/docs" class="nav-item">
                    <span class="nav-icon">ğŸ“–</span>
                    <span class="nav-label">API æ–‡æª”</span>
                </a>
                <a href="/docs/faq" class="nav-item active">
                    <span class="nav-icon">â“</span>
                    <span class="nav-label">å¸¸è¦‹å•é¡Œ</span>
                </a>
                <a href="#" class="nav-item" onclick="alert('æ•™å­¸é é¢å³å°‡æ¨å‡ºï¼'); return false;">
                    <span class="nav-icon">ğŸ“š</span>
                    <span class="nav-label">ä½¿ç”¨æ•™å­¸</span>
                </a>
                <a href="#" class="nav-item" onclick="alert('éŒ¯èª¤è™•ç†æŒ‡å—å³å°‡æ¨å‡ºï¼'); return false;">
                    <span class="nav-icon">ğŸ›¡ï¸</span>
                    <span class="nav-label">éŒ¯èª¤è™•ç†</span>
                </a>
                <a href="#" class="nav-item" onclick="alert('æ•ˆèƒ½æŒ‡å—å³å°‡æ¨å‡ºï¼'); return false;">
                    <span class="nav-icon">âš¡</span>
                    <span class="nav-label">æ•ˆèƒ½å„ªåŒ–</span>
                </a>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- æœå°‹å’Œç¯©é¸å€åŸŸ -->
        <div class="search-filter-container">
            <div class="search-box">
                <input type="text" 
                       class="search-input" 
                       id="searchInput"
                       placeholder="æœå°‹å•é¡Œé—œéµå­—... (Ctrl+K)"
                       autocomplete="off">
                <span class="search-icon">ğŸ”</span>
            </div>

            <div class="category-filters">
                <div class="filter-tag active" data-category="all">å…¨éƒ¨å•é¡Œ</div>
                <div class="filter-tag" data-category="api">API ä½¿ç”¨</div>
                <div class="filter-tag" data-category="errors">éŒ¯èª¤è™•ç†</div>
                <div class="filter-tag" data-category="performance">æ•ˆèƒ½å„ªåŒ–</div>
                <div class="filter-tag" data-category="integration">æ•´åˆæŒ‡å—</div>
            </div>
        </div>

        <!-- è¼‰å…¥ç‹€æ…‹ -->
        <div class="loading" id="loading">
            <div class="loading-spinner"></div>
            <p>è¼‰å…¥ä¸­...</p>
        </div>

        <!-- FAQ å…§å®¹å€åŸŸ -->
        <div class="faq-container" id="faqContainer">
            <!-- FAQ é …ç›®å°‡é€šé JavaScript å‹•æ…‹è¼‰å…¥ -->
        </div>

        <!-- ç„¡æœå°‹çµæœç‹€æ…‹ -->
        <div class="no-results" id="noResults" style="display: none;">
            <div class="no-results-icon">â“</div>
            <h3>æ‰¾ä¸åˆ°ç›¸é—œå•é¡Œ</h3>
            <p>è«‹å˜—è©¦ä½¿ç”¨å…¶ä»–é—œéµå­—æˆ–é¸æ“‡ä¸åŒçš„åˆ†é¡ç¯©é¸å™¨</p>
        </div>
    </div>

    <!-- FAQ JavaScript -->
    <script>
        // FAQ è³‡æ–™çµæ§‹
        const faqData = {
            api: [
                {
                    question: "å¦‚ä½•é–‹å§‹ä½¿ç”¨ SEO Analyzer APIï¼Ÿ",
                    answer: `<p>ä½¿ç”¨ SEO Analyzer API éå¸¸ç°¡å–®ï¼Œåªéœ€è¦ä»¥ä¸‹å¹¾å€‹æ­¥é©Ÿï¼š</p>
                    <p><strong>1. ç™¼é€ POST è«‹æ±‚</strong>åˆ° <code>/api/analyze</code> ç«¯é»</p>
                    <p><strong>2. åŒ…å«å¿…è¦åƒæ•¸</strong>ï¼š</p>
                    <pre>
{
  "keyword": "æ‚¨è¦åˆ†æçš„é—œéµå­—",
  "audience": "ç›®æ¨™å—çœ¾æè¿°",
  "options": {
    "generate_draft": false,
    "include_faq": false,
    "include_table": false
  }
}
                    </pre>
                    <p><strong>3. cURL ç¯„ä¾‹</strong>ï¼š</p>
                    <pre>
curl -X POST "http://localhost:8001/api/analyze" \\
     -H "Content-Type: application/json" \\
     -d '{
       "keyword": "SEO å„ªåŒ–å·¥å…·",
       "audience": "ç¶²ç«™ç®¡ç†å“¡å’Œè¡ŒéŠ·äººå“¡",
       "options": {
         "generate_draft": true,
         "include_faq": true,
         "include_table": false
       }
     }'
                    </pre>`,
                    category: "api"
                },
                {
                    question: "API æœ‰ä»€éº¼ä½¿ç”¨é™åˆ¶å—ï¼Ÿ",
                    answer: `<p>SEO Analyzer API æœ‰ä»¥ä¸‹ä½¿ç”¨é™åˆ¶ï¼š</p>
                    <p><strong>åƒæ•¸é™åˆ¶ï¼š</strong></p>
                    <ul>
                        <li><code>keyword</code>ï¼š1-50 å­—å…ƒ</li>
                        <li><code>audience</code>ï¼š1-200 å­—å…ƒ</li>
                        <li>è™•ç†æ™‚é–“ä¸Šé™ï¼š70 ç§’</li>
                    </ul>
                    <p><strong>é »ç‡é™åˆ¶ï¼š</strong></p>
                    <ul>
                        <li>æ¯åˆ†é˜æœ€å¤š 20 æ¬¡è«‹æ±‚</li>
                        <li>åŒæ™‚ä½µç™¼ä¸è¶…é 5 å€‹è«‹æ±‚</li>
                        <li>å–®ä¸€ IP æ¯å°æ™‚ 100 æ¬¡è«‹æ±‚</li>
                    </ul>
                    <p><strong>è™•ç†èƒ½åŠ›ï¼š</strong></p>
                    <ul>
                        <li>å¹³å‡è™•ç†æ™‚é–“ï¼š20-35 ç§’</li>
                        <li>æˆåŠŸç‡ï¼š98%+</li>
                        <li>Token ä½¿ç”¨é‡ï¼š5000-7000 per request</li>
                    </ul>`,
                    category: "api"
                },
                {
                    question: "å¦‚ä½•æª¢æŸ¥ API æœå‹™æ˜¯å¦æ­£å¸¸é‹è¡Œï¼Ÿ",
                    answer: `<p>æ‚¨å¯ä»¥ä½¿ç”¨å¥åº·æª¢æŸ¥ç«¯é»ä¾†ç¢ºèª API ç‹€æ…‹ï¼š</p>
                    <p><strong>å¥åº·æª¢æŸ¥ï¼š</strong></p>
                    <pre>
curl http://localhost:8001/api/health
                    </pre>
                    <p><strong>æ­£å¸¸å›æ‡‰ï¼š</strong></p>
                    <pre>
{
  "status": "healthy",
  "version": "1.0.0",
  "timestamp": "2025-08-23T12:00:00Z",
  "uptime": 3600
}
                    </pre>
                    <p><strong>ç‰ˆæœ¬è³‡è¨Šï¼š</strong></p>
                    <pre>
curl http://localhost:8001/api/version
                    </pre>`,
                    category: "api"
                },
                {
                    question: "API å›æ‡‰æ ¼å¼æ˜¯ä»€éº¼æ¨£çš„ï¼Ÿ",
                    answer: `<p>æˆåŠŸçš„ API å›æ‡‰åŒ…å«ä»¥ä¸‹çµæ§‹ï¼š</p>
                    <pre>
{
  "status": "success",
  "processing_time": 45.8,
  "data": {
    "serp_summary": {
      "total_results": 10,
      "successful_scrapes": 8,
      "avg_word_count": 1250,
      "avg_paragraphs": 12
    },
    "analysis_report": "# SEO åˆ†æå ±å‘Š\\n\\n...",
    "metadata": {
      "keyword": "SEO å„ªåŒ–å·¥å…·",
      "audience": "ç¶²ç«™ç®¡ç†å“¡",
      "generated_at": "2025-08-23T12:00:00Z",
      "token_usage": 6500
    }
  }
}
                    </pre>
                    <p><strong>ä¸»è¦æ¬„ä½èªªæ˜ï¼š</strong></p>
                    <ul>
                        <li><code>analysis_report</code>ï¼šMarkdown æ ¼å¼çš„ SEO åˆ†æå ±å‘Š</li>
                        <li><code>serp_summary</code>ï¼šæœå°‹çµæœçµ±è¨ˆè³‡è¨Š</li>
                        <li><code>processing_time</code>ï¼šç¸½è™•ç†æ™‚é–“ï¼ˆç§’ï¼‰</li>
                        <li><code>token_usage</code>ï¼šAI Token æ¶ˆè€—é‡</li>
                    </ul>`,
                    category: "api"
                }
            ],
            errors: [
                {
                    question: "é‡åˆ° 422 é©—è­‰éŒ¯èª¤è©²å¦‚ä½•è™•ç†ï¼Ÿ",
                    answer: `<p>422 éŒ¯èª¤è¡¨ç¤ºè«‹æ±‚åƒæ•¸é©—è­‰å¤±æ•—ï¼š</p>
                    <p><strong>å¸¸è¦‹åŸå› ï¼š</strong></p>
                    <ul>
                        <li>é—œéµå­—é•·åº¦ä¸ç¬¦è¦æ±‚ï¼ˆ1-50 å­—å…ƒï¼‰</li>
                        <li>å—çœ¾æè¿°éé•·ï¼ˆ>200 å­—å…ƒï¼‰</li>
                        <li>ç¼ºå°‘å¿…è¦çš„åƒæ•¸</li>
                        <li>åƒæ•¸é¡å‹ä¸æ­£ç¢º</li>
                    </ul>
                    <p><strong>æ­£ç¢ºçš„è«‹æ±‚æ ¼å¼ï¼š</strong></p>
                    <pre>
{
  "keyword": "æœ‰æ•ˆé—œéµå­—",  // 1-50 å­—å…ƒ
  "audience": "å…·é«”çš„ç›®æ¨™å—çœ¾æè¿°",  // 1-200 å­—å…ƒ
  "options": {
    "generate_draft": true,
    "include_faq": false,
    "include_table": true
  }
}
                    </pre>
                    <p><strong>éŒ¯èª¤å›æ‡‰ç¯„ä¾‹ï¼š</strong></p>
                    <pre>
{
  "status": "error",
  "error_code": "VALIDATION_ERROR", 
  "message": "é—œéµå­—é•·åº¦å¿…é ˆåœ¨ 1-50 å­—å…ƒä¹‹é–“",
  "details": {
    "field": "keyword",
    "current_length": 55,
    "max_length": 50
  }
}
                    </pre>`,
                    category: "errors"
                },
                {
                    question: "å¦‚ä½•è™•ç† 429 é »ç‡é™åˆ¶éŒ¯èª¤ï¼Ÿ",
                    answer: `<p>429 éŒ¯èª¤è¡¨ç¤ºè¶…é API ä½¿ç”¨é »ç‡é™åˆ¶ï¼š</p>
                    <p><strong>é™åˆ¶è¦å‰‡ï¼š</strong></p>
                    <ul>
                        <li>æ¯åˆ†é˜æœ€å¤š 20 æ¬¡è«‹æ±‚</li>
                        <li>åŒæ™‚ä½µç™¼ä¸è¶…é 5 å€‹è«‹æ±‚</li>
                        <li>å–®ä¸€ IP æ¯å°æ™‚ 100 æ¬¡è«‹æ±‚</li>
                    </ul>
                    <p><strong>å»ºè­°çš„é‡è©¦ç­–ç•¥ï¼š</strong></p>
                    <pre>
import time
import random

def request_with_backoff(make_request, max_retries=5):
    """å¯¦ä½œæŒ‡æ•¸é€€é¿é‡è©¦æ©Ÿåˆ¶"""
    for attempt in range(max_retries):
        try:
            response = make_request()
            if response.status_code != 429:
                return response
        except Exception as e:
            pass
            
        if attempt < max_retries - 1:
            # æŒ‡æ•¸é€€é¿ + éš¨æ©ŸæŠ–å‹•
            wait_time = (2 ** attempt) + random.uniform(0, 1)
            print(f"ç­‰å¾… {wait_time:.1f} ç§’å¾Œé‡è©¦...")
            time.sleep(wait_time)
    
    return None
                    </pre>
                    <p><strong>æœ€ä½³å¯¦å‹™ï¼š</strong></p>
                    <ul>
                        <li>å¯¦ä½œè«‹æ±‚ä½‡åˆ—ï¼Œæ§åˆ¶ä½µç™¼æ•¸é‡</li>
                        <li>ç›£æ§ <code>Retry-After</code> header</li>
                        <li>å¯¦ä½œå®¢æˆ¶ç«¯å¿«å–æ¸›å°‘é‡è¤‡è«‹æ±‚</li>
                    </ul>`,
                    category: "errors"
                },
                {
                    question: "API è«‹æ±‚é€¾æ™‚è©²æ€éº¼è¾¦ï¼Ÿ",
                    answer: `<p>API è«‹æ±‚å¯èƒ½å› ç‚ºå„ç¨®åŸå› ç™¼ç”Ÿé€¾æ™‚ï¼š</p>
                    <p><strong>é€¾æ™‚è¨­å®šï¼š</strong></p>
                    <ul>
                        <li>API è™•ç†ä¸Šé™ï¼š70 ç§’</li>
                        <li>å»ºè­°å®¢æˆ¶ç«¯é€¾æ™‚ï¼š80 ç§’</li>
                        <li>å¹³å‡è™•ç†æ™‚é–“ï¼š20-35 ç§’</li>
                    </ul>
                    <p><strong>é€¾æ™‚è™•ç†ç¯„ä¾‹ï¼š</strong></p>
                    <pre>
import requests
from requests.exceptions import Timeout, RequestException

def analyze_with_timeout(keyword, audience, timeout=80):
    """å¸¶é€¾æ™‚è™•ç†çš„ API å‘¼å«"""
    try:
        response = requests.post(
            "http://localhost:8001/api/analyze",
            json={
                "keyword": keyword,
                "audience": audience,
                "options": {"generate_draft": False}  # é€Ÿåº¦å„ªåŒ–
            },
            timeout=timeout
        )
        return response.json()
    
    except Timeout:
        return {
            "error": "è«‹æ±‚é€¾æ™‚",
            "suggestion": "è«‹å˜—è©¦ç°¡åŒ–é—œéµå­—æˆ–ç¨å¾Œå†è©¦"
        }
    except RequestException as e:
        return {
            "error": f"è«‹æ±‚å¤±æ•—: {str(e)}",
            "suggestion": "è«‹æª¢æŸ¥ç¶²è·¯é€£ç·šå’Œæœå‹™ç‹€æ…‹"
        }
                    </pre>
                    <p><strong>å„ªåŒ–å»ºè­°ï¼š</strong></p>
                    <ul>
                        <li>ä½¿ç”¨ç°¡æ½”çš„é—œéµå­—æ¸›å°‘è™•ç†æ™‚é–“</li>
                        <li>é—œé–‰ä¸å¿…è¦çš„é¸é …ï¼ˆdraftã€FAQã€tableï¼‰</li>
                        <li>éŒ¯å³°ä½¿ç”¨é¿é–‹é«˜å³°æ™‚æ®µ</li>
                    </ul>`,
                    category: "errors"
                },
                {
                    question: "æ”¶åˆ° 500 å…§éƒ¨ä¼ºæœå™¨éŒ¯èª¤è©²å¦‚ä½•è™•ç†ï¼Ÿ",
                    answer: `<p>500 éŒ¯èª¤è¡¨ç¤ºæœå‹™å™¨å…§éƒ¨ç™¼ç”Ÿæœªé æœŸéŒ¯èª¤ï¼š</p>
                    <p><strong>å¯èƒ½åŸå› ï¼š</strong></p>
                    <ul>
                        <li>å¤–éƒ¨ API æœå‹™ä¸å¯ç”¨ï¼ˆSerpAPIã€Azure OpenAIï¼‰</li>
                        <li>æœå‹™å™¨è³‡æºä¸è¶³</li>
                        <li>ç¨‹å¼ç¢¼åŸ·è¡Œç•°å¸¸</li>
                        <li>ç¶²è·¯é€£ç·šå•é¡Œ</li>
                    </ul>
                    <p><strong>è™•ç†ç­–ç•¥ï¼š</strong></p>
                    <pre>
def handle_server_error(response):
    """è™•ç† 500 éŒ¯èª¤çš„å»ºè­°æµç¨‹"""
    if response.status_code == 500:
        error_data = response.json()
        error_code = error_data.get("error_code")
        
        if error_code == "SERP_API_ERROR":
            print("SerpAPI æœå‹™ç•°å¸¸ï¼Œè«‹ç¨å¾Œå†è©¦")
            return "retry_later"
        elif error_code == "AI_API_ERROR":
            print("AI åˆ†ææœå‹™ç•°å¸¸ï¼Œè«‹ç¨å¾Œå†è©¦")
            return "retry_later"
        elif error_code == "SCRAPER_ERROR":
            print("ç¶²é çˆ¬å–å¤±æ•—ï¼Œè«‹å˜—è©¦å…¶ä»–é—œéµå­—")
            return "try_different_keyword"
        else:
            print("æœå‹™æš«æ™‚ä¸å¯ç”¨ï¼Œè«‹ç¨å¾Œå†è©¦")
            return "retry_later"
                    </pre>
                    <p><strong>å»ºè­°è¡Œå‹•ï¼š</strong></p>
                    <ul>
                        <li>ç­‰å¾… 5-10 åˆ†é˜å¾Œé‡è©¦</li>
                        <li>æª¢æŸ¥æœå‹™ç‹€æ…‹é é¢</li>
                        <li>ç°¡åŒ–è«‹æ±‚åƒæ•¸</li>
                        <li>è¯ç¹«æŠ€è¡“æ”¯æ´</li>
                    </ul>`,
                    category: "errors"
                }
            ],
            performance: [
                {
                    question: "å¦‚ä½•æé«˜ API å›æ‡‰é€Ÿåº¦ï¼Ÿ",
                    answer: `<p>ä»¥ä¸‹ç­–ç•¥å¯ä»¥é¡¯è‘—æå‡ API æ•ˆèƒ½ï¼š</p>
                    <p><strong>1. åƒæ•¸å„ªåŒ–ï¼ˆé€Ÿåº¦å„ªå…ˆé…ç½®ï¼‰</strong></p>
                    <pre>
{
  "keyword": "ç²¾æº–é—œéµå­—",  // é¿å…éæ–¼å¯¬æ³›
  "audience": "å…·é«”ç›®æ¨™ç¾¤é«”",  // ç°¡æ½”æ˜ç¢º
  "options": {
    "generate_draft": false,  // é—œé–‰åˆç¨¿ç”Ÿæˆ
    "include_faq": false,     // é—œé–‰ FAQ
    "include_table": false    // é—œé–‰æ¯”è¼ƒè¡¨æ ¼
  }
}
                    </pre>
                    <p><strong>è™•ç†æ™‚é–“å°æ¯”ï¼š</strong></p>
                    <ul>
                        <li>é€Ÿåº¦å„ªåŒ–ï¼š15-20 ç§’</li>
                        <li>å¹³è¡¡é…ç½®ï¼š20-30 ç§’</li>
                        <li>å®Œæ•´åŠŸèƒ½ï¼š30-45 ç§’</li>
                    </ul>
                    <p><strong>2. å¯¦ä½œæ™ºèƒ½é‡è©¦æ©Ÿåˆ¶</strong></p>
                    <pre>
import asyncio
import aiohttp

async def fast_analyze(keyword, audience):
    """éåŒæ­¥å¿«é€Ÿåˆ†æ"""
    timeout = aiohttp.ClientTimeout(total=60)
    
    async with aiohttp.ClientSession(timeout=timeout) as session:
        try:
            async with session.post(
                "http://localhost:8001/api/analyze",
                json={
                    "keyword": keyword,
                    "audience": audience,
                    "options": {"generate_draft": False}
                }
            ) as response:
                return await response.json()
        except asyncio.TimeoutError:
            return {"error": "è«‹æ±‚é€¾æ™‚"}
                    </pre>`,
                    category: "performance"
                },
                {
                    question: "å¦‚ä½•ç›£æ§ API æ•ˆèƒ½ï¼Ÿ",
                    answer: `<p>å»ºç«‹å®Œæ•´çš„æ•ˆèƒ½ç›£æ§é«”ç³»ï¼š</p>
                    <p><strong>éšæ®µè¨ˆæ™‚ç›£æ§ï¼š</strong></p>
                    <pre>
import time
import requests

def monitor_performance(keyword):
    """ç›£æ§å„éšæ®µè™•ç†æ™‚é–“"""
    start_time = time.time()
    
    response = requests.post(
        "http://localhost:8001/api/analyze",
        json={"keyword": keyword, "audience": "test"}
    )
    
    total_time = time.time() - start_time
    data = response.json()
    
    print(f"ç¸½è™•ç†æ™‚é–“: {total_time:.2f} ç§’")
    print(f"API å›å ±æ™‚é–“: {data.get('processing_time', 0):.2f} ç§’")
    print(f"Token ä½¿ç”¨é‡: {data.get('data', {}).get('metadata', {}).get('token_usage', 0)}")
    
    # æ•ˆèƒ½è­¦å‘Š
    if total_time > 60:
        print("âš ï¸ è™•ç†æ™‚é–“è¶…é 60 ç§’é–¾å€¼")
    elif total_time > 45:
        print("âš ï¸ è™•ç†æ™‚é–“æ¥è¿‘é–¾å€¼ï¼Œå»ºè­°å„ªåŒ–")
                    </pre>
                    <p><strong>æ•ˆèƒ½æŒ‡æ¨™åŸºæº–ï¼š</strong></p>
                    <ul>
                        <li><strong>SERP éšæ®µ</strong>ï¼š< 15 ç§’ âš ï¸</li>
                        <li><strong>çˆ¬èŸ²éšæ®µ</strong>ï¼š< 25 ç§’ âš ï¸</li>
                        <li><strong>AI åˆ†æéšæ®µ</strong>ï¼š< 35 ç§’ âš ï¸</li>
                        <li><strong>ç¸½è™•ç†æ™‚é–“</strong>ï¼š< 55 ç§’ âš ï¸</li>
                    </ul>
                    <p><strong>ç›£æ§å»ºè­°ï¼š</strong></p>
                    <ul>
                        <li>è¨˜éŒ„æ¯æ¬¡è«‹æ±‚çš„è™•ç†æ™‚é–“</li>
                        <li>è¿½è¹¤æˆåŠŸç‡å’ŒéŒ¯èª¤ç‡</li>
                        <li>ç›£æ§ Token ä½¿ç”¨é‡è¶¨å‹¢</li>
                        <li>è¨­å®šæ•ˆèƒ½è­¦å‘Šé–¾å€¼</li>
                    </ul>`,
                    category: "performance"
                },
                {
                    question: "å¦‚ä½•å¯¦ä½œä½µç™¼è«‹æ±‚æ§åˆ¶ï¼Ÿ",
                    answer: `<p>é©ç•¶çš„ä½µç™¼æ§åˆ¶èƒ½æå‡æ•´é«”ååé‡ï¼š</p>
                    <p><strong>ä½µç™¼é™åˆ¶ï¼š</strong></p>
                    <ul>
                        <li>å»ºè­°ä½µç™¼æ•¸ï¼š3-5 å€‹</li>
                        <li>æœ€å¤§ä½µç™¼æ•¸ï¼š5 å€‹ï¼ˆç¡¬é™åˆ¶ï¼‰</li>
                        <li>è¶…å‡ºé™åˆ¶æœƒæ”¶åˆ° 429 éŒ¯èª¤</li>
                    </ul>
                    <p><strong>Python ä½µç™¼å¯¦ä½œï¼š</strong></p>
                    <pre>
import asyncio
import aiohttp
from asyncio import Semaphore

class ConcurrentAnalyzer:
    def __init__(self, max_concurrent=3):
        self.semaphore = Semaphore(max_concurrent)
        self.session = None
    
    async def __aenter__(self):
        self.session = aiohttp.ClientSession()
        return self
    
    async def __aexit__(self, exc_type, exc_val, exc_tb):
        await self.session.close()
    
    async def analyze(self, keyword, audience):
        async with self.semaphore:
            try:
                async with self.session.post(
                    "http://localhost:8001/api/analyze",
                    json={"keyword": keyword, "audience": audience},
                    timeout=aiohttp.ClientTimeout(total=80)
                ) as response:
                    return await response.json()
            except Exception as e:
                return {"error": str(e), "keyword": keyword}
    
    async def batch_analyze(self, keywords_audiences):
        tasks = [
            self.analyze(kw, aud) 
            for kw, aud in keywords_audiences
        ]
        return await asyncio.gather(*tasks, return_exceptions=True)

# ä½¿ç”¨ç¯„ä¾‹
async def main():
    data = [
        ("SEO å·¥å…·", "ç¶²ç«™ç®¡ç†å“¡"),
        ("é—œéµå­—ç ”ç©¶", "è¡ŒéŠ·äººå“¡"),
        ("å…§å®¹å„ªåŒ–", "éƒ¨è½å®¢")
    ]
    
    async with ConcurrentAnalyzer(max_concurrent=3) as analyzer:
        results = await analyzer.batch_analyze(data)
        for result in results:
            print(f"çµæœ: {result.get('status', 'error')}")
                    </pre>`,
                    category: "performance"
                },
                {
                    question: "å¦‚ä½•é¸æ“‡æœ€ä½³çš„è™•ç†é¸é …çµ„åˆï¼Ÿ",
                    answer: `<p>æ ¹æ“šéœ€æ±‚é¸æ“‡é©åˆçš„é¸é …çµ„åˆï¼š</p>
                    <p><strong>ğŸš€ é€Ÿåº¦å„ªå…ˆï¼ˆ15-20 ç§’ï¼‰ï¼š</strong></p>
                    <pre>
{
  "options": {
    "generate_draft": false,
    "include_faq": false, 
    "include_table": false
  }
}
                    </pre>
                    <p><strong>âš–ï¸ å¹³è¡¡é…ç½®ï¼ˆ20-30 ç§’ï¼‰ï¼š</strong></p>
                    <pre>
{
  "options": {
    "generate_draft": true,   // æä¾›å…§å®¹å»ºè­°
    "include_faq": false,
    "include_table": false
  }
}
                    </pre>
                    <p><strong>ğŸ“Š å®Œæ•´åŠŸèƒ½ï¼ˆ30-45 ç§’ï¼‰ï¼š</strong></p>
                    <pre>
{
  "options": {
    "generate_draft": true,   // å®Œæ•´åˆç¨¿
    "include_faq": true,      // å¸¸è¦‹å•é¡Œ
    "include_table": true     // ç«¶å“æ¯”è¼ƒè¡¨
  }
}
                    </pre>
                    <p><strong>é¸æ“‡å»ºè­°ï¼š</strong></p>
                    <ul>
                        <li><strong>å³æ™‚æŸ¥è©¢</strong>ï¼šé€Ÿåº¦å„ªå…ˆï¼Œå¿«é€Ÿç²å¾—æ ¸å¿ƒåˆ†æ</li>
                        <li><strong>å…§å®¹è¦åŠƒ</strong>ï¼šå¹³è¡¡é…ç½®ï¼Œå«åˆç¨¿å»ºè­°</li>
                        <li><strong>æ·±åº¦ç ”ç©¶</strong>ï¼šå®Œæ•´åŠŸèƒ½ï¼Œæ¶µè“‹æ‰€æœ‰è³‡è¨Š</li>
                        <li><strong>æ‰¹é‡è™•ç†</strong>ï¼šé€Ÿåº¦å„ªå…ˆï¼Œæé«˜ååé‡</li>
                    </ul>`,
                    category: "performance"
                }
            ],
            integration: [
                {
                    question: "å¦‚ä½•æ•´åˆåˆ° Python æ‡‰ç”¨ç¨‹å¼ï¼Ÿ",
                    answer: `<p>å®Œæ•´çš„ Python æ•´åˆç¯„ä¾‹ï¼š</p>
                    <pre>
import requests
import json
from typing import Dict, Any, Optional
from dataclasses import dataclass

@dataclass
class AnalyzeOptions:
    generate_draft: bool = False
    include_faq: bool = False
    include_table: bool = False

class SEOAnalyzer:
    def __init__(self, base_url: str = "http://localhost:8001"):
        self.base_url = base_url
        self.session = requests.Session()
        self.session.headers.update({
            "Content-Type": "application/json",
            "User-Agent": "SEO-Analyzer-Client/1.0"
        })
    
    def analyze(self, 
                keyword: str, 
                audience: str,
                options: Optional[AnalyzeOptions] = None) -> Dict[str, Any]:
        """åŸ·è¡Œ SEO é—œéµå­—åˆ†æ"""
        
        if options is None:
            options = AnalyzeOptions()
        
        payload = {
            "keyword": keyword,
            "audience": audience,
            "options": {
                "generate_draft": options.generate_draft,
                "include_faq": options.include_faq,
                "include_table": options.include_table
            }
        }
        
        try:
            response = self.session.post(
                f"{self.base_url}/api/analyze",
                json=payload,
                timeout=80
            )
            response.raise_for_status()
            return response.json()
            
        except requests.exceptions.Timeout:
            return {"error": "è«‹æ±‚é€¾æ™‚", "error_code": "TIMEOUT"}
        except requests.exceptions.RequestException as e:
            return {"error": f"è«‹æ±‚å¤±æ•—: {str(e)}", "error_code": "REQUEST_FAILED"}
    
    def health_check(self) -> bool:
        """æª¢æŸ¥ API å¥åº·ç‹€æ…‹"""
        try:
            response = self.session.get(f"{self.base_url}/api/health", timeout=10)
            return response.status_code == 200
        except:
            return False

# ä½¿ç”¨ç¯„ä¾‹
if __name__ == "__main__":
    analyzer = SEOAnalyzer()
    
    # æª¢æŸ¥æœå‹™ç‹€æ…‹
    if not analyzer.health_check():
        print("API æœå‹™ä¸å¯ç”¨")
        exit(1)
    
    # åŸ·è¡Œåˆ†æ
    options = AnalyzeOptions(generate_draft=True, include_faq=False)
    result = analyzer.analyze(
        keyword="Python æ©Ÿå™¨å­¸ç¿’",
        audience="æ•¸æ“šç§‘å­¸åˆå­¸è€…",
        options=options
    )
    
    if result.get("status") == "success":
        print(f"åˆ†æå®Œæˆï¼Œè™•ç†æ™‚é–“: {result['processing_time']:.1f} ç§’")
        print(f"Token ä½¿ç”¨é‡: {result['data']['metadata']['token_usage']}")
    else:
        print(f"åˆ†æå¤±æ•—: {result.get('error', 'æœªçŸ¥éŒ¯èª¤')}")
                    </pre>`,
                    category: "integration"
                },
                {
                    question: "å¦‚ä½•æ•´åˆåˆ° Node.js æ‡‰ç”¨ç¨‹å¼ï¼Ÿ",
                    answer: `<p>Node.js æ•´åˆç¯„ä¾‹ï¼Œæ”¯æ´ Promise å’Œ async/awaitï¼š</p>
                    <pre>
const axios = require('axios');

class SEOAnalyzer {
    constructor(baseUrl = 'http://localhost:8001') {
        this.baseUrl = baseUrl;
        this.client = axios.create({
            baseURL: baseUrl,
            timeout: 80000,
            headers: {
                'Content-Type': 'application/json',
                'User-Agent': 'SEO-Analyzer-Client/1.0'
            }
        });
    }

    async analyze(keyword, audience, options = {}) {
        const payload = {
            keyword,
            audience,
            options: {
                generate_draft: options.generateDraft || false,
                include_faq: options.includeFAQ || false,
                include_table: options.includeTable || false
            }
        };

        try {
            const response = await this.client.post('/api/analyze', payload);
            return response.data;
        } catch (error) {
            if (error.code === 'ECONNABORTED') {
                return { error: 'è«‹æ±‚é€¾æ™‚', errorCode: 'TIMEOUT' };
            }
            if (error.response) {
                return {
                    error: error.response.data.message || 'è«‹æ±‚å¤±æ•—',
                    errorCode: error.response.data.error_code,
                    status: error.response.status
                };
            }
            return { error: error.message, errorCode: 'NETWORK_ERROR' };
        }
    }

    async healthCheck() {
        try {
            const response = await this.client.get('/api/health');
            return response.status === 200;
        } catch {
            return false;
        }
    }

    // æ‰¹é‡åˆ†ææ”¯æ´
    async batchAnalyze(analyses, maxConcurrent = 3) {
        const semaphore = new Array(maxConcurrent).fill(Promise.resolve());
        let index = 0;

        const execute = async () => {
            if (index >= analyses.length) return;
            
            const currentIndex = index++;
            const { keyword, audience, options } = analyses[currentIndex];
            
            try {
                const result = await this.analyze(keyword, audience, options);
                return { index: currentIndex, result };
            } catch (error) {
                return { index: currentIndex, error: error.message };
            }
        };

        const results = await Promise.all(
            semaphore.map(async (promise) => {
                await promise;
                const batch = [];
                for (let i = 0; i < Math.ceil(analyses.length / maxConcurrent); i++) {
                    batch.push(execute());
                }
                return Promise.all(batch.filter(Boolean));
            })
        );

        return results.flat().sort((a, b) => a.index - b.index);
    }
}

// ä½¿ç”¨ç¯„ä¾‹
(async () => {
    const analyzer = new SEOAnalyzer();
    
    // å¥åº·æª¢æŸ¥
    const isHealthy = await analyzer.healthCheck();
    if (!isHealthy) {
        console.log('API æœå‹™ä¸å¯ç”¨');
        return;
    }

    // å–®ä¸€åˆ†æ
    const result = await analyzer.analyze(
        'JavaScript æ¡†æ¶æ¯”è¼ƒ',
        'å‰ç«¯é–‹ç™¼è€…',
        { generateDraft: true, includeFAQ: false, includeTable: true }
    );

    if (result.status === 'success') {
        console.log(\`åˆ†æå®Œæˆï¼Œè™•ç†æ™‚é–“: \${result.processing_time.toFixed(1)} ç§’\`);
        console.log(\`Token ä½¿ç”¨é‡: \${result.data.metadata.token_usage}\`);
    } else {
        console.log(\`åˆ†æå¤±æ•—: \${result.error}\`);
    }
})();
                    </pre>`,
                    category: "integration"
                },
                {
                    question: "å¦‚ä½•åœ¨ React å‰ç«¯ä¸­ä½¿ç”¨ï¼Ÿ",
                    answer: `<p>React æ•´åˆç¯„ä¾‹ï¼ŒåŒ…å« hooks å’Œç‹€æ…‹ç®¡ç†ï¼š</p>
                    <pre>
import React, { useState, useCallback } from 'react';
import axios from 'axios';

// è‡ªå®šç¾© Hook
const useSEOAnalyzer = (baseUrl = 'http://localhost:8001') => {
    const [loading, setLoading] = useState(false);
    const [error, setError] = useState(null);
    const [result, setResult] = useState(null);

    const analyze = useCallback(async (keyword, audience, options = {}) => {
        setLoading(true);
        setError(null);
        setResult(null);

        try {
            const response = await axios.post(\`\${baseUrl}/api/analyze\`, {
                keyword,
                audience,
                options: {
                    generate_draft: options.generateDraft || false,
                    include_faq: options.includeFAQ || false,
                    include_table: options.includeTable || false
                }
            }, {
                timeout: 80000,
                headers: {
                    'Content-Type': 'application/json'
                }
            });

            setResult(response.data);
        } catch (err) {
            if (err.code === 'ECONNABORTED') {
                setError('è«‹æ±‚é€¾æ™‚ï¼Œè«‹ç¨å¾Œå†è©¦');
            } else if (err.response) {
                setError(err.response.data.message || \`è«‹æ±‚å¤±æ•— (\${err.response.status})\`);
            } else {
                setError('ç¶²è·¯é€£ç·šéŒ¯èª¤');
            }
        } finally {
            setLoading(false);
        }
    }, [baseUrl]);

    return { loading, error, result, analyze };
};

// åˆ†æè¡¨å–®å…ƒä»¶
const SEOAnalyzerForm = () => {
    const [keyword, setKeyword] = useState('');
    const [audience, setAudience] = useState('');
    const [options, setOptions] = useState({
        generateDraft: false,
        includeFAQ: false,
        includeTable: false
    });

    const { loading, error, result, analyze } = useSEOAnalyzer();

    const handleSubmit = async (e) => {
        e.preventDefault();
        if (!keyword.trim() || !audience.trim()) {
            alert('è«‹å¡«å¯«é—œéµå­—å’Œç›®æ¨™å—çœ¾');
            return;
        }
        await analyze(keyword, audience, options);
    };

    return (
        <div className="seo-analyzer">
            <form onSubmit={handleSubmit}>
                <div>
                    <label>é—œéµå­—ï¼š</label>
                    <input
                        type="text"
                        value={keyword}
                        onChange={(e) => setKeyword(e.target.value)}
                        placeholder="è¼¸å…¥è¦åˆ†æçš„é—œéµå­—"
                        maxLength={50}
                        required
                    />
                </div>

                <div>
                    <label>ç›®æ¨™å—çœ¾ï¼š</label>
                    <textarea
                        value={audience}
                        onChange={(e) => setAudience(e.target.value)}
                        placeholder="æè¿°æ‚¨çš„ç›®æ¨™å—çœ¾"
                        maxLength={200}
                        required
                    />
                </div>

                <div>
                    <label>
                        <input
                            type="checkbox"
                            checked={options.generateDraft}
                            onChange={(e) => setOptions(prev => ({
                                ...prev, generateDraft: e.target.checked
                            }))}
                        />
                        ç”Ÿæˆå…§å®¹åˆç¨¿
                    </label>
                </div>

                <button type="submit" disabled={loading}>
                    {loading ? 'åˆ†æä¸­...' : 'é–‹å§‹åˆ†æ'}
                </button>
            </form>

            {error && (
                <div className="error">
                    âŒ {error}
                </div>
            )}

            {result && result.status === 'success' && (
                <div className="result">
                    <h3>åˆ†æå®Œæˆï¼</h3>
                    <p>è™•ç†æ™‚é–“: {result.processing_time.toFixed(1)} ç§’</p>
                    <p>Token ä½¿ç”¨é‡: {result.data.metadata.token_usage}</p>
                    <div className="report">
                        <h4>SEO åˆ†æå ±å‘Šï¼š</h4>
                        <pre>{result.data.analysis_report}</pre>
                    </div>
                </div>
            )}
        </div>
    );
};

export default SEOAnalyzerForm;
                    </pre>`,
                    category: "integration"
                },
                {
                    question: "å¦‚ä½•å¯¦ä½œéŒ¯èª¤è™•ç†å’Œé‡è©¦æ©Ÿåˆ¶ï¼Ÿ",
                    answer: `<p>å¥å£¯çš„éŒ¯èª¤è™•ç†å’Œé‡è©¦ç­–ç•¥ï¼š</p>
                    <p><strong>é‡è©¦æ©Ÿåˆ¶å¯¦ä½œï¼š</strong></p>
                    <pre>
import time
import random
import requests

def analyze_with_retry(keyword, audience, max_retries=5):
    """å¸¶é‡è©¦æ©Ÿåˆ¶çš„ API å‘¼å«"""
    for attempt in range(max_retries):
        try:
            response = requests.post(
                "http://localhost:8001/api/analyze",
                json={"keyword": keyword, "audience": audience},
                timeout=80
            )
            
            if response.status_code == 200:
                return response.json()
            elif response.status_code == 429:
                # é »ç‡é™åˆ¶ï¼Œç­‰å¾…æ›´ä¹…
                time.sleep(60 + random.uniform(0, 30))
            else:
                # å…¶ä»–éŒ¯èª¤ï¼ŒæŒ‡æ•¸é€€é¿
                wait_time = (2 ** attempt) + random.uniform(0, 1)
                time.sleep(wait_time)
                
        except requests.exceptions.Timeout:
            if attempt < max_retries - 1:
                time.sleep(2 ** attempt)
            else:
                return {"error": "è«‹æ±‚é€¾æ™‚"}
                
        except Exception as e:
            return {"error": f"ç¶²è·¯éŒ¯èª¤: {str(e)}"}
    
    return {"error": "é‡è©¦æ¬¡æ•¸ç”¨ç›¡"}

# ä½¿ç”¨ç¯„ä¾‹
result = analyze_with_retry("SEO å·¥å…·", "ç¶²ç«™ç®¡ç†å“¡")
if result.get("status") == "success":
    print("âœ… åˆ†ææˆåŠŸ")
else:
    print(f"âŒ å¤±æ•—: {result.get('error')}")
                    </pre>
                    <p><strong>æœ€ä½³å¯¦å‹™ï¼š</strong></p>
                    <ul>
                        <li>ä½¿ç”¨æŒ‡æ•¸é€€é¿ç­–ç•¥</li>
                        <li>æ·»åŠ éš¨æ©ŸæŠ–å‹•</li>
                        <li>å€åˆ†éŒ¯èª¤é¡å‹è™•ç†</li>
                        <li>è¨­å®šåˆç†é‡è©¦ä¸Šé™</li>
                    </ul>`,
                    category: "integration"
                }
            ]
        };

        // å…¨å±€è®Šæ•¸
        let currentCategory = 'all';
        let currentSearch = '';

        // DOM å…ƒç´ 
        const searchInput = document.getElementById('searchInput');
        const faqContainer = document.getElementById('faqContainer');
        const noResults = document.getElementById('noResults');
        const filterTags = document.querySelectorAll('.filter-tag');

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            renderFAQ();
            setupKeyboardShortcuts();
            
            // æœå°‹åŠŸèƒ½ - æ·»åŠ é˜²æŠ–
            let searchTimeout;
            searchInput.addEventListener('input', function(e) {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    currentSearch = e.target.value.toLowerCase().trim();
                    renderFAQ();
                }, 300); // 300ms é˜²æŠ–
            });

            // åˆ†é¡ç¯©é¸
            filterTags.forEach(tag => {
                tag.addEventListener('click', function() {
                    // ç§»é™¤å…¶ä»–æ¨™ç±¤çš„ active ç‹€æ…‹
                    filterTags.forEach(t => t.classList.remove('active'));
                    // æ·»åŠ ç•¶å‰æ¨™ç±¤çš„ active ç‹€æ…‹
                    this.classList.add('active');
                    
                    currentCategory = this.dataset.category;
                    renderFAQ();
                });
            });

            // æ·»åŠ æœå°‹çµ±è¨ˆå…ƒç´ 
            const searchContainer = document.querySelector('.search-filter-container');
            const statsElement = document.createElement('div');
            statsElement.id = 'searchStats';
            statsElement.style.cssText = `
                margin-top: 10px;
                font-size: 14px;
                color: var(--text-secondary);
                text-align: center;
                display: none;
            `;
            searchContainer.appendChild(statsElement);
        });

        // æ¸²æŸ“ FAQ
        function renderFAQ() {
            const filteredFAQ = getFilteredFAQ();
            
            if (filteredFAQ.length === 0) {
                faqContainer.style.display = 'none';
                noResults.style.display = 'block';
                updateSearchStats();
                return;
            }

            faqContainer.style.display = 'block';
            noResults.style.display = 'none';
            updateSearchStats();

            faqContainer.innerHTML = filteredFAQ.map((item, index) => `
                <div class="faq-item" data-category="${item.category}">
                    <div class="faq-question" onclick="toggleFAQ(${index})">
                        <div>
                            <h3>${highlightText(item.question, currentSearch)}
                                <span class="category-badge category-${item.category}">
                                    ${getCategoryName(item.category)}
                                </span>
                            </h3>
                        </div>
                        <div class="faq-icon">â–¼</div>
                    </div>
                    <div class="faq-answer">
                        <div class="faq-answer-content">
                            ${highlightText(item.answer, currentSearch)}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // å–å¾—ç¯©é¸å¾Œçš„ FAQ
        function getFilteredFAQ() {
            let allFAQ = [];
            
            // åˆä½µæ‰€æœ‰åˆ†é¡çš„ FAQ
            Object.keys(faqData).forEach(category => {
                allFAQ = allFAQ.concat(faqData[category]);
            });

            // åˆ†é¡ç¯©é¸
            if (currentCategory !== 'all') {
                allFAQ = allFAQ.filter(item => item.category === currentCategory);
            }

            // æœå°‹ç¯©é¸
            if (currentSearch) {
                allFAQ = allFAQ.filter(item => 
                    item.question.toLowerCase().includes(currentSearch) ||
                    item.answer.toLowerCase().includes(currentSearch)
                );
            }

            return allFAQ;
        }

        // åˆ‡æ› FAQ é …ç›®
        function toggleFAQ(index) {
            const faqItems = document.querySelectorAll('.faq-item');
            const targetItem = faqItems[index];
            
            if (targetItem) {
                const wasActive = targetItem.classList.contains('active');
                
                // å¯é¸ï¼šé—œé–‰å…¶ä»–å±•é–‹çš„é …ç›®ï¼ˆaccordion æ¨¡å¼ï¼‰
                // faqItems.forEach(item => item.classList.remove('active'));
                
                // åˆ‡æ›ç•¶å‰é …ç›®
                if (wasActive) {
                    targetItem.classList.remove('active');
                } else {
                    targetItem.classList.add('active');
                    
                    // å¹³æ»‘æ»¾å‹•åˆ°å±•é–‹çš„é …ç›®
                    setTimeout(() => {
                        targetItem.scrollIntoView({
                            behavior: 'smooth',
                            block: 'nearest'
                        });
                    }, 300);
                }
            }
        }

        // é«˜äº®æœå°‹æ–‡å­—
        function highlightText(text, search) {
            if (!search || search.length < 2) return text;
            
            // è½‰ç¾©ç‰¹æ®Šæ­£å‰‡å­—ç¬¦
            const escapedSearch = search.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
            const regex = new RegExp(`(${escapedSearch})`, 'gi');
            return text.replace(regex, '<mark style="background-color: #ffd700; padding: 2px; border-radius: 3px;">$1</mark>');
        }

        // å–å¾—åˆ†é¡åç¨±
        function getCategoryName(category) {
            const names = {
                'api': 'API ä½¿ç”¨',
                'errors': 'éŒ¯èª¤è™•ç†', 
                'performance': 'æ•ˆèƒ½å„ªåŒ–',
                'integration': 'æ•´åˆæŒ‡å—'
            };
            return names[category] || category;
        }

        // æ–°å¢ï¼šæœå°‹å»ºè­°åŠŸèƒ½
        function getSearchSuggestions(query) {
            if (!query || query.length < 2) return [];
            
            const suggestions = new Set();
            const allFAQ = [];
            
            Object.keys(faqData).forEach(category => {
                allFAQ.push(...faqData[category]);
            });
            
            allFAQ.forEach(item => {
                // å¾å•é¡Œä¸­æå–é—œéµå­—
                const words = item.question.toLowerCase().split(/\s+/);
                words.forEach(word => {
                    if (word.includes(query.toLowerCase()) && word.length > 2) {
                        suggestions.add(word);
                    }
                });
            });
            
            return Array.from(suggestions).slice(0, 5);
        }

        // æ–°å¢ï¼šçµ±è¨ˆè³‡è¨Šé¡¯ç¤º
        function updateSearchStats() {
            const filteredFAQ = getFilteredFAQ();
            const statsElement = document.getElementById('searchStats');
            
            if (statsElement) {
                const totalCount = Object.values(faqData).flat().length;
                const currentCount = filteredFAQ.length;
                
                if (currentSearch || currentCategory !== 'all') {
                    statsElement.textContent = `é¡¯ç¤º ${currentCount} / ${totalCount} å€‹å•é¡Œ`;
                    statsElement.style.display = 'block';
                } else {
                    statsElement.style.display = 'none';
                }
            }
        }

        // æ–°å¢ï¼šéµç›¤å¿«æ·éµæ”¯æ´
        function setupKeyboardShortcuts() {
            document.addEventListener('keydown', function(e) {
                // Ctrl/Cmd + K èšç„¦æœå°‹æ¡†
                if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                    e.preventDefault();
                    searchInput.focus();
                }
                
                // ESC æ¸…ç©ºæœå°‹
                if (e.key === 'Escape' && document.activeElement === searchInput) {
                    searchInput.value = '';
                    currentSearch = '';
                    renderFAQ();
                    searchInput.blur();
                }
            });
        }

        // å°èˆªåŠŸèƒ½
        function initNavigation() {
            // æ ¹æ“šç•¶å‰ URL è¨­å®š active ç‹€æ…‹
            const currentPath = window.location.pathname;
            const navItems = document.querySelectorAll('.nav-item');
            
            navItems.forEach(item => {
                item.classList.remove('active');
                const href = item.getAttribute('href');
                
                if (href === currentPath || 
                    (currentPath === '/docs' && href === '/docs') ||
                    (currentPath.includes('/docs/faq') && href === '/docs/faq')) {
                    item.classList.add('active');
                }
            });
        }

        // åœ¨ DOMContentLoaded ä¸­åˆå§‹åŒ–å°èˆª
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–å°èˆªç‹€æ…‹
            initNavigation();
            
            // æ·»åŠ å°èˆªé»æ“Šè™•ç†
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    // å¦‚æœæ˜¯å¤–éƒ¨é€£çµæˆ– JavaScript è™•ç†ï¼Œä¸éœ€è¦é¡å¤–é‚è¼¯
                    if (this.getAttribute('href').startsWith('#') || this.getAttribute('onclick')) {
                        return;
                    }
                    
                    // ç§»é™¤å…¶ä»–é …ç›®çš„ active ç‹€æ…‹
                    document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
                    // æ·»åŠ ç•¶å‰é …ç›®çš„ active ç‹€æ…‹
                    this.classList.add('active');
                });
            });
        });
    </script>
</body>
</html>
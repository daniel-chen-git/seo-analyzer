<!-- API 使用教學文檔 -->
<div class="api-tutorial-section">
    <div class="container">
        <h1>📚 API 使用教學</h1>
        <p class="tutorial-intro">
            完整的 SEO Analyzer API 整合指南，讓您快速上手並有效運用我們的 SEO 分析服務。
        </p>

        <!-- 快速整合指南 -->
        <div class="tutorial-section">
            <h2 id="quick-start">🚀 快速整合指南</h2>
            
            <div class="integration-tabs">
                <div class="tab-buttons">
                    <button class="tab-btn active" onclick="showTab('curl')">cURL</button>
                    <button class="tab-btn" onclick="showTab('python')">Python</button>
                    <button class="tab-btn" onclick="showTab('javascript')">JavaScript</button>
                    <button class="tab-btn" onclick="showTab('nodejs')">Node.js</button>
                </div>

                <!-- cURL 範例 -->
                <div class="tab-content active" id="curl">
                    <h3>使用 cURL 命令列工具</h3>
                    <div class="code-example">
                        <div class="code-header">
                            <span>基本 SEO 分析請求</span>
                            <button class="copy-btn" onclick="copyCode('curl-basic')">複製</button>
                        </div>
                        <pre id="curl-basic"><code>curl -X POST "http://localhost:8001/api/analyze" \
  -H "Content-Type: application/json" \
  -d '{
    "keyword": "Python 程式設計教學",
    "audience": "初學程式設計的學生和轉職者",
    "options": {
      "generate_draft": false,
      "include_faq": false,
      "include_table": false
    }
  }'</code></pre>
                    </div>

                    <div class="code-example">
                        <div class="code-header">
                            <span>完整分析請求（包含所有選項）</span>
                            <button class="copy-btn" onclick="copyCode('curl-full')">複製</button>
                        </div>
                        <pre id="curl-full"><code>curl -X POST "http://localhost:8001/api/analyze" \
  -H "Content-Type: application/json" \
  -d '{
    "keyword": "WordPress SEO 優化工具",
    "audience": "網站管理員和數位行銷人員",
    "options": {
      "generate_draft": true,
      "include_faq": true,
      "include_table": true
    }
  }' | jq '.'</code></pre>
                    </div>
                </div>

                <!-- Python 範例 -->
                <div class="tab-content" id="python">
                    <h3>使用 Python requests 庫</h3>
                    
                    <div class="code-example">
                        <div class="code-header">
                            <span>安裝依賴</span>
                            <button class="copy-btn" onclick="copyCode('python-install')">複製</button>
                        </div>
                        <pre id="python-install"><code>pip install requests</code></pre>
                    </div>

                    <div class="code-example">
                        <div class="code-header">
                            <span>基本使用範例</span>
                            <button class="copy-btn" onclick="copyCode('python-basic')">複製</button>
                        </div>
                        <pre id="python-basic"><code>import requests
import json
from typing import Dict, Any

def analyze_seo(keyword: str, audience: str, options: Dict[str, bool] = None) -> Dict[str, Any]:
    """
    執行 SEO 關鍵字分析
    
    Args:
        keyword: 要分析的關鍵字
        audience: 目標受眾描述
        options: 分析選項字典
    
    Returns:
        分析結果字典
    """
    if options is None:
        options = {
            "generate_draft": False,
            "include_faq": False,
            "include_table": False
        }
    
    url = "http://localhost:8001/api/analyze"
    payload = {
        "keyword": keyword,
        "audience": audience,
        "options": options
    }
    
    try:
        response = requests.post(url, json=payload, timeout=120)
        response.raise_for_status()
        return response.json()
    
    except requests.exceptions.Timeout:
        raise Exception("請求逾時，請稍後再試")
    except requests.exceptions.HTTPError as e:
        raise Exception(f"HTTP 錯誤: {e}")
    except requests.exceptions.RequestException as e:
        raise Exception(f"請求失敗: {e}")

# 使用範例
if __name__ == "__main__":
    try:
        result = analyze_seo(
            keyword="React 開發教學",
            audience="前端開發初學者",
            options={
                "generate_draft": True,
                "include_faq": True,
                "include_table": False
            }
        )
        
        print(f"處理時間: {result['processing_time']:.2f} 秒")
        print(f"分析報告:\n{result['data']['analysis_report'][:500]}...")
        
        # 階段計時資訊
        if 'phase_timings' in result['data']['metadata']:
            timings = result['data']['metadata']['phase_timings']
            print(f"\n階段計時:")
            print(f"  SERP 擷取: {timings.get('serp_duration', 0):.2f}s")
            print(f"  網頁爬取: {timings.get('scraping_duration', 0):.2f}s")
            print(f"  AI 分析: {timings.get('ai_duration', 0):.2f}s")
        
    except Exception as e:
        print(f"錯誤: {e}")</code></pre>
                    </div>
                </div>

                <!-- JavaScript 範例 -->
                <div class="tab-content" id="javascript">
                    <h3>使用 JavaScript fetch API</h3>
                    
                    <div class="code-example">
                        <div class="code-header">
                            <span>瀏覽器端實現</span>
                            <button class="copy-btn" onclick="copyCode('js-browser')">複製</button>
                        </div>
                        <pre id="js-browser"><code>/**
 * SEO 分析 API 客戶端
 */
class SEOAnalyzerClient {
    constructor(baseUrl = 'http://localhost:8001') {
        this.baseUrl = baseUrl;
    }

    /**
     * 執行 SEO 關鍵字分析
     * @param {string} keyword - 要分析的關鍵字
     * @param {string} audience - 目標受眾描述
     * @param {Object} options - 分析選項
     * @returns {Promise<Object>} 分析結果
     */
    async analyzeSEO(keyword, audience, options = {}) {
        const defaultOptions = {
            generate_draft: false,
            include_faq: false,
            include_table: false
        };

        const payload = {
            keyword,
            audience,
            options: { ...defaultOptions, ...options }
        };

        try {
            const response = await fetch(`${this.baseUrl}/api/analyze`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(payload)
            });

            if (!response.ok) {
                const errorData = await response.json();
                throw new Error(`API 錯誤: ${errorData.detail?.message || response.statusText}`);
            }

            return await response.json();
        } catch (error) {
            if (error.name === 'TypeError' && error.message.includes('fetch')) {
                throw new Error('網路連接失敗，請檢查服務器是否運行');
            }
            throw error;
        }
    }

    /**
     * 檢查 API 健康狀態
     * @returns {Promise<Object>} 健康狀態
     */
    async checkHealth() {
        const response = await fetch(`${this.baseUrl}/api/health`);
        return await response.json();
    }
}

// 使用範例
const client = new SEOAnalyzerClient();

async function performSEOAnalysis() {
    try {
        // 顯示載入狀態
        document.getElementById('loading').style.display = 'block';
        document.getElementById('results').innerHTML = '';

        const result = await client.analyzeSEO(
            'Vue.js 學習資源',
            '想學習前端框架的開發者',
            {
                generate_draft: true,
                include_faq: true,
                include_table: false
            }
        );

        // 隱藏載入狀態
        document.getElementById('loading').style.display = 'none';

        // 顯示結果
        const resultsDiv = document.getElementById('results');
        resultsDiv.innerHTML = `
            <h3>分析結果</h3>
            <p><strong>處理時間:</strong> ${result.processing_time.toFixed(2)} 秒</p>
            <p><strong>Token 使用量:</strong> ${result.data.metadata.token_usage}</p>
            <div class="analysis-report">
                <h4>SEO 分析報告</h4>
                <div style="white-space: pre-wrap; font-family: monospace;">
                    ${result.data.analysis_report}
                </div>
            </div>
        `;

    } catch (error) {
        document.getElementById('loading').style.display = 'none';
        document.getElementById('results').innerHTML = `
            <div class="error">錯誤: ${error.message}</div>
        `;
    }
}</code></pre>
                    </div>
                </div>

                <!-- Node.js 範例 -->
                <div class="tab-content" id="nodejs">
                    <h3>使用 Node.js 和 axios</h3>
                    
                    <div class="code-example">
                        <div class="code-header">
                            <span>安裝依賴</span>
                            <button class="copy-btn" onclick="copyCode('nodejs-install')">複製</button>
                        </div>
                        <pre id="nodejs-install"><code>npm install axios dotenv</code></pre>
                    </div>

                    <div class="code-example">
                        <div class="code-header">
                            <span>Node.js 實現</span>
                            <button class="copy-btn" onclick="copyCode('nodejs-impl')">複製</button>
                        </div>
                        <pre id="nodejs-impl"><code>const axios = require('axios');
require('dotenv').config();

/**
 * SEO Analyzer API 客戶端
 */
class SEOAnalyzerClient {
    constructor(baseUrl = process.env.SEO_API_URL || 'http://localhost:8001') {
        this.baseUrl = baseUrl;
        this.client = axios.create({
            baseURL: baseUrl,
            timeout: 120000, // 2 分鐘逾時
            headers: {
                'Content-Type': 'application/json',
            }
        });
    }

    /**
     * 執行 SEO 關鍵字分析
     */
    async analyzeSEO(keyword, audience, options = {}) {
        const defaultOptions = {
            generate_draft: false,
            include_faq: false,
            include_table: false
        };

        const payload = {
            keyword,
            audience,
            options: { ...defaultOptions, ...options }
        };

        try {
            const response = await this.client.post('/api/analyze', payload);
            return response.data;
        } catch (error) {
            if (error.response) {
                // API 返回的錯誤
                const errorDetail = error.response.data?.detail;
                throw new Error(`API 錯誤 (${error.response.status}): ${errorDetail?.message || errorDetail}`);
            } else if (error.code === 'ECONNREFUSED') {
                throw new Error('無法連接到 SEO Analyzer 服務，請確認服務器是否運行');
            } else if (error.code === 'TIMEOUT') {
                throw new Error('請求逾時，分析時間過長');
            }
            throw error;
        }
    }

    /**
     * 批量分析多個關鍵字
     */
    async batchAnalyze(keywords, audience, options = {}) {
        const results = [];
        const errors = [];

        console.log(`開始批量分析 ${keywords.length} 個關鍵字...`);

        for (let i = 0; i < keywords.length; i++) {
            const keyword = keywords[i];
            console.log(`正在分析: ${keyword} (${i + 1}/${keywords.length})`);

            try {
                const result = await this.analyzeSEO(keyword, audience, options);
                results.push({
                    keyword,
                    success: true,
                    data: result
                });
                
                // 避免過於頻繁的請求
                if (i < keywords.length - 1) {
                    await this.sleep(2000); // 等待 2 秒
                }
            } catch (error) {
                console.error(`分析失敗: ${keyword} - ${error.message}`);
                errors.push({
                    keyword,
                    error: error.message
                });
            }
        }

        return { results, errors };
    }

    /**
     * 檢查健康狀態
     */
    async checkHealth() {
        const response = await this.client.get('/api/health');
        return response.data;
    }

    /**
     * 輔助函數：延遲執行
     */
    sleep(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
    }
}

// 使用範例
async function main() {
    const client = new SEOAnalyzerClient();

    try {
        // 檢查服務狀態
        const health = await client.checkHealth();
        console.log('API 狀態:', health.status);

        // 單一關鍵字分析
        console.log('\n執行單一關鍵字分析...');
        const result = await client.analyzeSEO(
            'Node.js 後端開發',
            '想學習後端開發的前端工程師',
            {
                generate_draft: true,
                include_faq: false,
                include_table: true
            }
        );

        console.log(`分析完成，耗時: ${result.processing_time.toFixed(2)} 秒`);
        console.log(`Token 使用量: ${result.data.metadata.token_usage}`);
        console.log('分析報告:', result.data.analysis_report.substring(0, 200) + '...');

        // 批量分析範例
        console.log('\n執行批量分析...');
        const keywords = [
            'Express.js 教學',
            'MongoDB 資料庫',
            'REST API 設計'
        ];

        const batchResult = await client.batchAnalyze(
            keywords,
            '後端開發初學者',
            { generate_draft: false, include_faq: true, include_table: false }
        );

        console.log(`批量分析完成:`);
        console.log(`成功: ${batchResult.results.length} 個`);
        console.log(`失敗: ${batchResult.errors.length} 個`);

    } catch (error) {
        console.error('執行失敗:', error.message);
    }
}

// 執行範例（僅在直接運行此文件時執行）
if (require.main === module) {
    main();
}

module.exports = SEOAnalyzerClient;</code></pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- 詳細參數說明 -->
        <div class="tutorial-section">
            <h2 id="parameters">📋 參數詳細說明</h2>
            
            <div class="parameter-section">
                <h3>請求參數 (Request Body)</h3>
                
                <div class="parameter-table">
                    <table>
                        <thead>
                            <tr>
                                <th>參數</th>
                                <th>類型</th>
                                <th>必填</th>
                                <th>限制</th>
                                <th>說明</th>
                                <th>範例</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>keyword</code></td>
                                <td>string</td>
                                <td>✓</td>
                                <td>1-50 字元</td>
                                <td>要分析的 SEO 關鍵字</td>
                                <td>"Python 機器學習"</td>
                            </tr>
                            <tr>
                                <td><code>audience</code></td>
                                <td>string</td>
                                <td>✓</td>
                                <td>1-200 字元</td>
                                <td>目標受眾描述，越具體越好</td>
                                <td>"想轉職 AI 工程師的程式初學者"</td>
                            </tr>
                            <tr>
                                <td><code>options</code></td>
                                <td>object</td>
                                <td>✓</td>
                                <td>-</td>
                                <td>分析選項設定</td>
                                <td>見下方詳細說明</td>
                            </tr>
                            <tr>
                                <td><code>options.generate_draft</code></td>
                                <td>boolean</td>
                                <td>✓</td>
                                <td>-</td>
                                <td>是否生成文章草稿大綱</td>
                                <td>true / false</td>
                            </tr>
                            <tr>
                                <td><code>options.include_faq</code></td>
                                <td>boolean</td>
                                <td>✓</td>
                                <td>-</td>
                                <td>是否包含常見問題建議</td>
                                <td>true / false</td>
                            </tr>
                            <tr>
                                <td><code>options.include_table</code></td>
                                <td>boolean</td>
                                <td>✓</td>
                                <td>-</td>
                                <td>是否生成競爭對手比較表格</td>
                                <td>true / false</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="parameter-tips">
                    <h4>💡 參數使用建議</h4>
                    <ul>
                        <li><strong>關鍵字選擇</strong>: 選擇具體、有搜尋量的關鍵字，避免過於寬泛</li>
                        <li><strong>受眾描述</strong>: 包含受眾的背景、需求、痛點，有助於生成更精準的建議</li>
                        <li><strong>選項配置</strong>: 
                            <ul>
                                <li>基礎分析：全部設為 <code>false</code>（最快，約 20-30 秒）</li>
                                <li>標準分析：<code>generate_draft: true, include_faq: true</code>（約 35-45 秒）</li>
                                <li>完整分析：全部設為 <code>true</code>（最詳細，約 45-60 秒）</li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- 回應資料解析 -->
        <div class="tutorial-section">
            <h2 id="response-format">📊 回應資料解析</h2>
            
            <div class="response-example">
                <h3>完整回應結構</h3>
                <div class="code-example">
                    <pre><code>{
  "status": "success",
  "processing_time": 35.67,
  "data": {
    "analysis_report": "# SEO 分析報告：Python 機器學習\n\n## 分析概述\n...",
    "metadata": {
      "token_usage": 6724,
      "phase_timings": {
        "serp_duration": 2.15,
        "scraping_duration": 12.34,
        "ai_duration": 18.92
      },
      "total_phases_time": 33.41,
      "performance_warnings": [
        "⚠️ 效能警告: scraping 階段耗時 12.34s"
      ]
    },
    "serp_summary": {
      "total_results": 10,
      "successful_scrapes": 8,
      "failed_scrapes": 2,
      "average_content_length": 2150
    }
  },
  "timestamp": "2025-08-23T13:30:45.123Z"
}</code></pre>
                </div>
            </div>

            <div class="response-fields">
                <h3>回應欄位說明</h3>
                
                <div class="field-group">
                    <h4>根層級欄位</h4>
                    <ul>
                        <li><code>status</code>: 請求狀態 ("success" 或 "error")</li>
                        <li><code>processing_time</code>: 總處理時間（秒）</li>
                        <li><code>data</code>: 分析結果資料</li>
                        <li><code>timestamp</code>: 回應時間戳記 (ISO 8601 格式)</li>
                    </ul>
                </div>

                <div class="field-group">
                    <h4>data 物件</h4>
                    <ul>
                        <li><code>analysis_report</code>: Markdown 格式的完整 SEO 分析報告</li>
                        <li><code>metadata</code>: 處理過程的詳細資訊</li>
                        <li><code>serp_summary</code>: SERP 資料擷取摘要</li>
                    </ul>
                </div>

                <div class="field-group">
                    <h4>metadata 物件</h4>
                    <ul>
                        <li><code>token_usage</code>: AI 分析使用的 Token 數量</li>
                        <li><code>phase_timings</code>: 各階段詳細計時
                            <ul>
                                <li><code>serp_duration</code>: SERP 資料擷取時間</li>
                                <li><code>scraping_duration</code>: 網頁爬取時間</li>
                                <li><code>ai_duration</code>: AI 分析時間</li>
                            </ul>
                        </li>
                        <li><code>total_phases_time</code>: 所有階段總時間</li>
                        <li><code>performance_warnings</code>: 效能警告訊息陣列</li>
                    </ul>
                </div>
            </div>

            <div class="data-usage-tips">
                <h3>💡 資料使用建議</h3>
                <div class="tip-grid">
                    <div class="tip-card">
                        <h4>📝 分析報告處理</h4>
                        <p>分析報告使用 Markdown 格式，可以直接:</p>
                        <ul>
                            <li>在網頁中使用 Markdown 解析器渲染</li>
                            <li>轉換為 HTML 或 PDF 格式</li>
                            <li>提取特定段落進行進一步處理</li>
                        </ul>
                    </div>
                    
                    <div class="tip-card">
                        <h4>⏱️ 效能監控</h4>
                        <p>使用階段計時資訊來:</p>
                        <ul>
                            <li>識別處理瓶頸</li>
                            <li>設定合理的超時時間</li>
                            <li>向用戶顯示進度預估</li>
                        </ul>
                    </div>
                    
                    <div class="tip-card">
                        <h4>💰 成本控制</h4>
                        <p>監控 Token 使用量:</p>
                        <ul>
                            <li>一般範圍: 5,000-7,000 tokens/次</li>
                            <li>可用於成本估算</li>
                            <li>優化參數以控制用量</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- 最佳實務建議 -->
        <div class="tutorial-section">
            <h2 id="best-practices">⭐ 最佳實務建議</h2>
            
            <div class="practice-grid">
                <div class="practice-card">
                    <h3>🔄 請求管理</h3>
                    <ul>
                        <li><strong>設定適當超時</strong>: 建議 120 秒以上</li>
                        <li><strong>實作重試機制</strong>: 網路錯誤時自動重試 2-3 次</li>
                        <li><strong>批量處理間隔</strong>: 連續請求間至少等待 2 秒</li>
                        <li><strong>併發限制</strong>: 同時最多 3-5 個請求</li>
                    </ul>
                </div>
                
                <div class="practice-card">
                    <h3>📊 資料處理</h3>
                    <ul>
                        <li><strong>結構化儲存</strong>: 將分析報告解析為結構化資料</li>
                        <li><strong>快取機制</strong>: 相同參數的結果可快取 24 小時</li>
                        <li><strong>增量更新</strong>: 定期更新關鍵字分析結果</li>
                        <li><strong>備份重要資料</strong>: 儲存原始回應和處理結果</li>
                    </ul>
                </div>
                
                <div class="practice-card">
                    <h3>🛡️ 錯誤處理</h3>
                    <ul>
                        <li><strong>分類錯誤類型</strong>: 區分暫時性和永久性錯誤</li>
                        <li><strong>使用者友善訊息</strong>: 將技術錯誤轉換為易懂說明</li>
                        <li><strong>降級處理</strong>: 服務不可用時提供替代方案</li>
                        <li><strong>監控告警</strong>: 設定錯誤率和回應時間監控</li>
                    </ul>
                </div>
                
                <div class="practice-card">
                    <h3>⚡ 效能優化</h3>
                    <ul>
                        <li><strong>參數優化</strong>: 根據需求選擇合適的分析選項</li>
                        <li><strong>非同步處理</strong>: 使用非同步方式處理長時間請求</li>
                        <li><strong>進度顯示</strong>: 向使用者展示處理進度</li>
                        <li><strong>結果預處理</strong>: 預先處理常用的分析結果</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- 常見使用情境 -->
        <div class="tutorial-section">
            <h2 id="use-cases">🎯 常見使用情境</h2>
            
            <div class="use-case-list">
                <div class="use-case">
                    <h3>1. 內容創作輔助</h3>
                    <p><strong>場景</strong>: 部落格作者想為特定主題創作 SEO 友善的文章</p>
                    <p><strong>建議配置</strong>:</p>
                    <pre><code>{
  "generate_draft": true,
  "include_faq": true,
  "include_table": false
}</code></pre>
                    <p><strong>重點關注</strong>: 分析報告中的內容結構建議、關鍵字密度、標題優化</p>
                </div>

                <div class="use-case">
                    <h3>2. 競爭對手分析</h3>
                    <p><strong>場景</strong>: 數位行銷人員研究市場競爭狀況</p>
                    <p><strong>建議配置</strong>:</p>
                    <pre><code>{
  "generate_draft": false,
  "include_faq": false,
  "include_table": true
}</code></pre>
                    <p><strong>重點關注</strong>: SERP 摘要資料、競爭對手比較表格、市場機會分析</p>
                </div>

                <div class="use-case">
                    <h3>3. 關鍵字研究</h3>
                    <p><strong>場景</strong>: SEO 專家進行關鍵字可行性評估</p>
                    <p><strong>建議配置</strong>:</p>
                    <pre><code>{
  "generate_draft": false,
  "include_faq": true,
  "include_table": true
}</code></pre>
                    <p><strong>重點關注</strong>: 搜尋結果總數、競爭強度評估、使用者意圖分析</p>
                </div>

                <div class="use-case">
                    <h3>4. 批量內容規劃</h3>
                    <p><strong>場景</strong>: 內容團隊規劃多個主題的內容策略</p>
                    <p><strong>建議配置</strong>:</p>
                    <pre><code>{
  "generate_draft": true,
  "include_faq": false,
  "include_table": false
}</code></pre>
                    <p><strong>重點關注</strong>: 使用批量處理功能，分析多個相關關鍵字</p>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.api-tutorial-section {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    line-height: 1.6;
    color: #2d3748;
}

.tutorial-intro {
    font-size: 1.1rem;
    color: #4a5568;
    margin-bottom: 30px;
    padding: 20px;
    background-color: #f7fafc;
    border-left: 4px solid #667eea;
    border-radius: 4px;
}

.tutorial-section {
    margin: 40px 0;
    padding: 30px 0;
    border-bottom: 1px solid #e2e8f0;
}

.tutorial-section:last-child {
    border-bottom: none;
}

.tutorial-section h2 {
    color: #2d3748;
    margin-bottom: 25px;
    padding-bottom: 10px;
    border-bottom: 2px solid #667eea;
}

/* 標籤切換 */
.integration-tabs {
    margin: 20px 0;
}

.tab-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
    margin-bottom: 20px;
    border-bottom: 2px solid #e2e8f0;
}

.tab-btn {
    padding: 10px 20px;
    border: none;
    background: #f7fafc;
    color: #4a5568;
    cursor: pointer;
    border-radius: 6px 6px 0 0;
    font-weight: 500;
    transition: all 0.3s ease;
}

.tab-btn:hover {
    background: #e2e8f0;
}

.tab-btn.active {
    background: #667eea;
    color: white;
}

.tab-content {
    display: none;
    padding: 20px 0;
}

.tab-content.active {
    display: block;
}

/* 程式碼範例 */
.code-example {
    margin: 20px 0;
    border-radius: 8px;
    overflow: hidden;
    border: 1px solid #e2e8f0;
}

.code-header {
    background: #2d3748;
    color: white;
    padding: 10px 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.9rem;
}

.copy-btn {
    background: #667eea;
    color: white;
    border: none;
    padding: 5px 10px;
    border-radius: 4px;
    font-size: 0.8rem;
    cursor: pointer;
    transition: background 0.3s;
}

.copy-btn:hover {
    background: #5a67d8;
}

.code-example pre {
    background: #1a202c;
    color: #e2e8f0;
    padding: 20px;
    margin: 0;
    overflow-x: auto;
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
    font-size: 0.9rem;
    line-height: 1.4;
}

/* 參數表格 */
.parameter-table table {
    width: 100%;
    border-collapse: collapse;
    margin: 20px 0;
    font-size: 0.9rem;
}

.parameter-table th,
.parameter-table td {
    border: 1px solid #e2e8f0;
    padding: 12px;
    text-align: left;
}

.parameter-table th {
    background: #f7fafc;
    font-weight: 600;
    color: #2d3748;
}

.parameter-table code {
    background: #edf2f7;
    padding: 2px 6px;
    border-radius: 3px;
    font-family: monospace;
    font-size: 0.85rem;
    color: #d63384;
}

.parameter-tips {
    background: #f0fff4;
    border: 1px solid #9ae6b4;
    border-radius: 6px;
    padding: 20px;
    margin: 20px 0;
}

.parameter-tips h4 {
    color: #22543d;
    margin: 0 0 15px 0;
}

/* 回應範例 */
.response-example {
    margin: 20px 0;
}

.response-fields {
    margin: 30px 0;
}

.field-group {
    margin: 20px 0;
    padding: 15px;
    background: #f7fafc;
    border-radius: 6px;
}

.field-group h4 {
    color: #2d3748;
    margin: 0 0 10px 0;
}

.field-group ul {
    margin: 10px 0;
    padding-left: 20px;
}

.field-group code {
    background: #edf2f7;
    padding: 2px 4px;
    border-radius: 3px;
    font-family: monospace;
    color: #d63384;
}

/* 提示網格 */
.tip-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin: 20px 0;
}

.tip-card {
    background: white;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.tip-card h4 {
    color: #2d3748;
    margin: 0 0 15px 0;
}

/* 最佳實務網格 */
.practice-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 25px;
    margin: 30px 0;
}

.practice-card {
    background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
    border-radius: 10px;
    padding: 25px;
    border-left: 4px solid #667eea;
}

.practice-card h3 {
    color: #2d3748;
    margin: 0 0 15px 0;
    font-size: 1.2rem;
}

.practice-card ul {
    margin: 0;
    padding-left: 20px;
}

.practice-card li {
    margin: 8px 0;
    line-height: 1.5;
}

.practice-card strong {
    color: #2d3748;
}

/* 使用情境 */
.use-case-list {
    margin: 20px 0;
}

.use-case {
    background: white;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    padding: 25px;
    margin: 20px 0;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
}

.use-case h3 {
    color: #2d3748;
    margin: 0 0 15px 0;
    padding-bottom: 8px;
    border-bottom: 1px solid #e2e8f0;
}

.use-case pre {
    background: #f7fafc;
    border: 1px solid #e2e8f0;
    border-radius: 4px;
    padding: 15px;
    margin: 10px 0;
    overflow-x: auto;
    font-size: 0.9rem;
}

/* 響應式設計 */
@media (max-width: 768px) {
    .tip-grid,
    .practice-grid {
        grid-template-columns: 1fr;
    }
    
    .tab-buttons {
        justify-content: flex-start;
        overflow-x: auto;
    }
    
    .tab-btn {
        flex-shrink: 0;
    }
    
    .parameter-table {
        overflow-x: auto;
    }
    
    .code-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
    }
}
</style>

<script>
function showTab(tabName) {
    // 隱藏所有標籤內容
    document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.remove('active');
    });
    
    // 移除所有按鈕的 active 狀態
    document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    
    // 顯示選中的標籤
    document.getElementById(tabName).classList.add('active');
    
    // 設定對應按鈕為 active
    event.target.classList.add('active');
}

function copyCode(elementId) {
    const element = document.getElementById(elementId);
    const text = element.textContent;
    
    navigator.clipboard.writeText(text).then(function() {
        const button = element.closest('.code-example').querySelector('.copy-btn');
        const originalText = button.textContent;
        button.textContent = '已複製!';
        button.style.background = '#48bb78';
        
        setTimeout(function() {
            button.textContent = originalText;
            button.style.background = '#667eea';
        }, 2000);
    }).catch(function(err) {
        console.error('複製失敗:', err);
    });
}
</script>
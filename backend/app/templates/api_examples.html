<!-- API 使用範例區塊 - 可以嵌入到主模板中 -->
<div class="api-examples-section">
    <div class="container">
        <h2>💡 常用範例</h2>
        
        <div class="examples-grid">
            <!-- 基礎分析範例 -->
            <div class="example-card">
                <h3>🔍 基礎關鍵字分析</h3>
                <div class="example-content">
                    <div class="example-description">
                        <p>適用於初次分析某個關鍵字，快速了解競爭狀況和優化方向。</p>
                    </div>
                    <div class="code-block">
                        <div class="code-header">
                            <span>POST /api/analyze</span>
                            <button class="copy-btn" onclick="copyToClipboard('basic-example')">複製</button>
                        </div>
                        <pre id="basic-example"><code>{
  "keyword": "Python 教學",
  "audience": "程式初學者",
  "options": {
    "generate_draft": false,
    "include_faq": false,
    "include_table": false
  }
}</code></pre>
                    </div>
                    <div class="example-response">
                        <h4>回應重點</h4>
                        <ul>
                            <li><strong>processing_time</strong>: 處理時間（通常 20-35 秒）</li>
                            <li><strong>analysis_report</strong>: 完整的 SEO 分析報告</li>
                            <li><strong>phase_timings</strong>: 各階段詳細計時</li>
                            <li><strong>token_usage</strong>: AI Token 使用量</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- 完整分析範例 -->
            <div class="example-card">
                <h3>📊 完整深度分析</h3>
                <div class="example-content">
                    <div class="example-description">
                        <p>包含文章草稿、FAQ 和比較表格的完整分析，適合內容創作。</p>
                    </div>
                    <div class="code-block">
                        <div class="code-header">
                            <span>POST /api/analyze</span>
                            <button class="copy-btn" onclick="copyToClipboard('full-example')">複製</button>
                        </div>
                        <pre id="full-example"><code>{
  "keyword": "WordPress SEO 優化",
  "audience": "部落客和小企業主",
  "options": {
    "generate_draft": true,
    "include_faq": true,
    "include_table": true
  }
}</code></pre>
                    </div>
                    <div class="example-note">
                        <p><strong>💡 提示</strong>: 完整分析會消耗更多 Token，處理時間可能較長（30-50 秒）</p>
                    </div>
                </div>
            </div>
            
            <!-- 批量分析範例 -->
            <div class="example-card">
                <h3>🚀 效能監控範例</h3>
                <div class="example-content">
                    <div class="example-description">
                        <p>了解系統狀態和各項效能指標。</p>
                    </div>
                    <div class="code-block">
                        <div class="code-header">
                            <span>GET /api/health</span>
                            <button class="copy-btn" onclick="copyToClipboard('health-example')">複製</button>
                        </div>
                        <pre id="health-example"><code>curl -X GET "http://localhost:8001/api/health"

# 回應範例
{
  "status": "healthy",
  "timestamp": "2025-08-23T10:30:00.000Z",
  "services": {
    "serp_api": "integrated",
    "azure_openai": "active",
    "redis": "disabled"
  }
}</code></pre>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 效能指標說明 -->
        <div class="performance-metrics">
            <h3>📈 效能指標說明</h3>
            <div class="metrics-grid">
                <div class="metric-item">
                    <h4>⏱️ 處理時間</h4>
                    <p><strong>目標</strong>: < 60 秒<br>
                    <strong>平均</strong>: 20-35 秒<br>
                    <strong>監控</strong>: 即時階段計時</p>
                </div>
                <div class="metric-item">
                    <h4>🎯 成功率</h4>
                    <p><strong>目標</strong>: > 95%<br>
                    <strong>監控</strong>: 自動重試機制<br>
                    <strong>報告</strong>: 詳細錯誤追蹤</p>
                </div>
                <div class="metric-item">
                    <h4>🔄 並發能力</h4>
                    <p><strong>支援</strong>: 3-5 個同時請求<br>
                    <strong>佇列</strong>: 智能請求排程<br>
                    <strong>限制</strong>: 每分鐘 20 次</p>
                </div>
                <div class="metric-item">
                    <h4>💰 Token 效率</h4>
                    <p><strong>範圍</strong>: 5,000-7,000/次<br>
                    <strong>優化</strong>: 動態內容截取<br>
                    <strong>監控</strong>: 即時使用量追蹤</p>
                </div>
            </div>
        </div>
        
        <!-- 錯誤處理指南 -->
        <div class="error-handling">
            <h3>⚠️ 錯誤處理指南</h3>
            <div class="error-examples">
                <div class="error-item">
                    <h4>HTTP 400 - 輸入驗證錯誤</h4>
                    <pre><code>{
  "detail": {
    "code": "VALIDATION_ERROR",
    "message": "關鍵字長度必須在 1-50 字元之間",
    "field": "keyword",
    "provided_value": "這是一個超過五十個字元限制的非常長的關鍵字範例",
    "expected_format": "1-50 字元字串"
  }
}</code></pre>
                </div>
                <div class="error-item">
                    <h4>HTTP 503 - 服務暫時不可用</h4>
                    <pre><code>{
  "detail": {
    "code": "SERP_API_ERROR",
    "message": "搜尋資料擷取失敗，請稍後再試",
    "timestamp": "2025-08-23T10:30:00.000Z",
    "processing_time": 15.5
  }
}</code></pre>
                </div>
                <div class="error-item">
                    <h4>HTTP 504 - 處理逾時</h4>
                    <pre><code>{
  "detail": {
    "code": "PROCESSING_TIMEOUT",
    "message": "分析處理時間超過限制",
    "timestamp": "2025-08-23T10:30:00.000Z",
    "processing_time": 65.0,
    "suggestion": "嘗試簡化分析選項或稍後再試"
  }
}</code></pre>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.api-examples-section {
    background: #ffffff;
    padding: 50px 0;
    border-top: 1px solid #e2e8f0;
}

.examples-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 30px;
    margin-top: 30px;
}

.example-card {
    background: #f8f9fa;
    border-radius: 12px;
    padding: 25px;
    border: 1px solid #e2e8f0;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
}

.example-card h3 {
    color: #2d3748;
    margin: 0 0 20px 0;
    font-size: 1.3rem;
    border-bottom: 2px solid #667eea;
    padding-bottom: 10px;
}

.example-description {
    margin-bottom: 20px;
}

.example-description p {
    color: #4a5568;
    line-height: 1.6;
    margin: 0;
}

.code-block {
    background: #2d3748;
    border-radius: 8px;
    overflow: hidden;
    margin: 15px 0;
}

.code-header {
    background: #1a202c;
    padding: 10px 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.code-header span {
    color: #a0aec0;
    font-size: 0.9rem;
    font-family: monospace;
}

.copy-btn {
    background: #667eea;
    color: white;
    border: none;
    padding: 5px 12px;
    border-radius: 4px;
    font-size: 0.8rem;
    cursor: pointer;
    transition: background 0.3s;
}

.copy-btn:hover {
    background: #5a67d8;
}

.code-block pre {
    margin: 0;
    padding: 20px;
    overflow-x: auto;
    color: #e2e8f0;
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
    font-size: 0.9rem;
    line-height: 1.5;
}

.example-response {
    background: white;
    padding: 20px;
    border-radius: 8px;
    margin-top: 15px;
    border-left: 4px solid #48bb78;
}

.example-response h4 {
    color: #2d3748;
    margin: 0 0 15px 0;
    font-size: 1.1rem;
}

.example-response ul {
    margin: 0;
    padding-left: 20px;
}

.example-response li {
    color: #4a5568;
    line-height: 1.6;
    margin: 8px 0;
}

.example-note {
    background: #bee3f8;
    border: 1px solid #90cdf4;
    border-radius: 6px;
    padding: 15px;
    margin-top: 15px;
}

.example-note p {
    margin: 0;
    color: #2a4365;
}

.performance-metrics {
    margin-top: 50px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 40px;
    border-radius: 12px;
}

.performance-metrics h3 {
    margin: 0 0 30px 0;
    font-size: 1.5rem;
    text-align: center;
}

.metrics-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 25px;
}

.metric-item {
    background: rgba(255, 255, 255, 0.1);
    padding: 20px;
    border-radius: 8px;
    backdrop-filter: blur(10px);
}

.metric-item h4 {
    margin: 0 0 15px 0;
    font-size: 1.1rem;
}

.metric-item p {
    margin: 0;
    line-height: 1.6;
    font-size: 0.9rem;
}

.error-handling {
    margin-top: 50px;
}

.error-handling h3 {
    color: #2d3748;
    margin: 0 0 30px 0;
    font-size: 1.5rem;
    text-align: center;
    border-bottom: 2px solid #e2e8f0;
    padding-bottom: 15px;
}

.error-examples {
    display: grid;
    gap: 25px;
}

.error-item {
    background: #fff5f5;
    border: 1px solid #feb2b2;
    border-radius: 8px;
    padding: 20px;
}

.error-item h4 {
    color: #c53030;
    margin: 0 0 15px 0;
    font-size: 1.1rem;
}

.error-item pre {
    background: #2d3748;
    color: #e2e8f0;
    padding: 15px;
    border-radius: 6px;
    overflow-x: auto;
    font-size: 0.85rem;
    line-height: 1.4;
}

@media (max-width: 768px) {
    .examples-grid {
        grid-template-columns: 1fr;
    }
    
    .metrics-grid {
        grid-template-columns: 1fr;
    }
    
    .example-card {
        padding: 20px;
    }
    
    .code-header {
        flex-direction: column;
        gap: 10px;
        align-items: flex-start;
    }
}
</style>

<script>
function copyToClipboard(elementId) {
    const element = document.getElementById(elementId);
    const text = element.textContent;
    
    navigator.clipboard.writeText(text).then(function() {
        // 找到對應的複製按鈕並短暫改變文字
        const button = element.closest('.code-block').querySelector('.copy-btn');
        const originalText = button.textContent;
        button.textContent = '已複製!';
        button.style.background = '#48bb78';
        
        setTimeout(function() {
            button.textContent = originalText;
            button.style.background = '#667eea';
        }, 2000);
    }).catch(function(err) {
        console.error('複製失敗:', err);
    });
}
</script>